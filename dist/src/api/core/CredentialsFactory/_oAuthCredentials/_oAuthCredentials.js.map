{"version":3,"file":"_oAuthCredentials.js","sourceRoot":"","sources":["../../../../../../src/api/core/CredentialsFactory/_oAuthCredentials/_oAuthCredentials.ts"],"names":[],"mappings":";;;AAAA,0DAAqE;AACrE,6CAA0C;AAC1C,gEAAmE;AAGtD,QAAA,iBAAiB,GAAG,CAAC,SAAsB,eAAK,EAAE,EAAE,CAAC,KAAK,EACrE,KAAa,EACS,EAAE;IACxB,MAAM,EAAE,YAAY,EAAE,WAAW,EAAE,GAAG,mCAAa,CAAC,KAAK,CAAC,CAAC;IAC3D,MAAM,WAAW,GAAG;QAClB,GAAG,EAAE,GAAG,WAAW,CAAC,OAAO,eAAe;QAC1C,MAAM,EAAE;YACN,UAAU,EAAE,eAAe;YAC3B,aAAa,EAAE,YAAY;SAC5B;KACF,CAAC;IACF,aAAK,CAAC,MAAM,CAAC,CAAC;IACd,MAAM,QAAQ,GAAuB,MAAM,MAAM,CAAC,WAAW,CAAC,CAAC;IAE/D,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE;QAClB,MAAM,IAAI,KAAK,CACb,4DAA4D,CAC7D,CAAC;KACH;IACD,OAAO,gCAAU,CAAC,WAAW,EAAE,QAAQ,CAAC,CAAC;AAC3C,CAAC,CAAC","sourcesContent":["import { AxiosResponse, AxiosStatic, default as axios } from 'axios';\nimport { void0 } from '../../../../utils';\nimport { validateToken, writeToken } from '../_credentialsFactory';\nimport { Credentials } from '../_credentialsFactory/typescript';\n\nexport const _oAuthCredentials = (_axios: AxiosStatic = axios) => async (\n  token: string\n): Promise<Credentials> => {\n  const { refreshToken, credentials } = validateToken(token);\n  const axiosConfig = {\n    url: `${credentials.authUrl}/oauth2/token`,\n    params: {\n      grant_type: 'refresh_token',\n      refresh_token: refreshToken,\n    },\n  };\n  void0(_axios);\n  const response: AxiosResponse<any> = await _axios(axiosConfig);\n\n  if (!response.data) {\n    throw new Error(\n      '!! validate credntials Invalid data back from axios client'\n    );\n  }\n  return writeToken(credentials, response);\n};\n"]}