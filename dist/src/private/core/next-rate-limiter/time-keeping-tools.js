"use strict";
/**
 * the ECMAScript epoch and timestamps
 *
 * A JavaScript date is fundamentally specified as the number of milliseconds
 * that have elapsed since midnight on January 1, 1970, UTC. This date and time
 * are not the same as the UNIX epoch (the number of seconds that have elapsed
 * since midnight on January 1, 1970, UTC), which is the predominant base value
 * for computer-recorded date and time values.
 *
 * Note: It's important to keep in mind that while the time value at the heart of
 * a Date object is UTC, the basic methods to fetch the date and time or its
 * components all work in the local (i.e. host system) time zone and offset.
 *
 * It should be noted that the maximum Date is not of the same value as the
 * maximum safe integer (Number.MAX_SAFE_INTEGER is 9,007,199,254,740,991).
 * Instead, it is defined in ECMA-262 that a maximum of ±100,000,000 (one hundred
 * million) days relative to January 1, 1970 UTC (that is, April 20, 271821 BCE ~
 * September 13, 275760 CE) can be represented by the standard Date object
 * (equivalent to ±8,640,000,000,000,000 milliseconds).
 *
 *
 * Date.now()
 *
 * Returns the numeric value corresponding to the current time—the number of
 * milliseconds elapsed since January 1, 1970 00:00:00 UTC, with leap seconds
 * ignored.
 *
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.timeRemaning = exports.timeKeepingTools = exports.secondsRemaning = exports.secondeStr = exports.sec = exports.possibleReqstPerSecond = exports.minuteStr = exports.minutesRemaning = exports.miliSecStr = exports.milisec = exports.limitRequestsPerSecond = exports.epochSec = exports.epochMs = void 0;
const { ceil, floor, max, min } = Math;
/**
 * returns the number of milliseconds elapsed since
 * January 1, 1970 00:00:00 UTC, with leap seconds ignored.
 * @returns  milliseconds
 */
const epochMs = epochMsFunct;
exports.epochMs = epochMs;
/**
 * returns the number of milliseconds elapsed since
 * January 1, 1970 00:00:00 UTC, with leap seconds ignored.
 * @returns  milliseconds
 */
function epochMsFunct() {
    return Date.now();
}
const epochSec = epochSecFunct;
exports.epochSec = epochSec;
/**
 * returns the number of seconds elapsed since
 * January 1, 1970 00:00:00 UTC, with leap seconds ignored.
 * @returns  seconds
 */
function epochSecFunct() {
    return Date.now() / 1000;
}
/**
 * extract the minutes part of and amout of miliseconds.
 * @param  miliseconds - The number of miliseconds from which to
 * extract the minute(s) rounded floor part.
 * @returns  Formated string `X`min
 */
const minuteStr = minuteStrFunct;
exports.minuteStr = minuteStr;
function minuteStrFunct(miliseconds) {
    return `${floor(miliseconds / 1000 / 60)}min`;
}
/**
 * extract the rest part in seconds from miliseconds deducted from the minutes.
 * @param  miliseconds - The number of miliseconds from which to
 * extract the second(s) rounded floor part.
 * @returns  Formated string `X`sec
 */
const secondeStr = secondeStrFunct;
exports.secondeStr = secondeStr;
function secondeStrFunct(miliseconds) {
    return `${floor(miliseconds / 1000) % 60}sec`;
}
/**
 * extract the rest part in miliseconds after deducting from the seconds.
 * @param  miliseconds - The number of miliseconds from which to
 * extract rest rounded floor part.
 * @returns  Formated string `X`ms
 */
const miliSecStr = miliSecStrFunct;
exports.miliSecStr = miliSecStr;
function miliSecStrFunct(miliseconds) {
    return `${floor(miliseconds % 1000)}ms`;
}
/**
 * convert seconds to miliseconds (seconds × 1000)
 * @param  seconds - number of seconds to convert in miliseconds
 * @returns  miliseconds
 */
const milisec = milisecFunct;
exports.milisec = milisec;
function milisecFunct(seconds) {
    return seconds * 1000;
}
/**
 * convert miliseconds to seconds celi(miliseconds ÷ 1000)
 * @param  miliseconds - number of miliseconds to convert in seconds
 * @returns  seconds
 */
const sec = secFunct;
exports.sec = sec;
function secFunct(miliseconds) {
    return ceil(miliseconds / 1000);
}
/**
 * calculate the amout of miliseconds remaining from now until a future milisecond
 * epoch return -1 if epoch is in the past or if result is 0
 * @param  laterMs - future unix epoch in miliseconds
 * @returns  miliseconds remaining from now until laterMs
 */
const timeRemaning = timeRemaningFunct;
exports.timeRemaning = timeRemaning;
function timeRemaningFunct(laterMs) {
    const nowMs = epochMs();
    if (nowMs > laterMs) {
        return -1;
    }
    return laterMs - nowMs || -1;
}
/**
 * calculate the amout of minutes remaining from now until a future milisecond
 * epoch return -1 if epoch is in the past or if result is 0
 * @param  laterMs - future unix epoch in miliseconds
 * @returns  miliseconds from now until laterMs
 */
const minutesRemaning = minutesRemaningFunct;
exports.minutesRemaning = minutesRemaning;
function minutesRemaningFunct(laterMs) {
    const value = ceil(timeRemaning(laterMs) / (60 * 1000));
    if (value > 0) {
        return value;
    }
    return -1;
}
/**
 * calculate the amout of seconds remaining from now until a future milisecond
 * epoch return -1 if epoch is in the past or if result is 0
 * @param  laterMs - future unix epoch in miliseconds
 * @returns  seconds from now until laterMs.
 * Result should be consider as "less than" X seconde(s).
 */
const secondsRemaning = secondsRemaningFunct;
exports.secondsRemaning = secondsRemaning;
function secondsRemaningFunct(laterMs) {
    const value = ceil(timeRemaning(laterMs) / 1000);
    if (value > 0) {
        return value;
    }
    return -1;
}
/**
 * calculate from msRemaning, the maximum amout of request per seconde
 * (the frequecy)
 * @param  reqstRemaining - ['x-ratelimit-remaining']
 * @param  msRemaning - timeRemaning(['x-ratelimit-reset'] × 1000)
 * @param  maximumperseconds - upper maximal limit of request permited by the rate limiter each seconds
 * @returns  number of request per seconde in hertz
 */
const possibleReqstPerSecond = possibleReqstPerSecondFunct;
exports.possibleReqstPerSecond = possibleReqstPerSecond;
/**
 * calculate from msRemaning, the maximum amout of request per seconde
 * (the frequecy)
 * @param  reqstRemaining - ['x-ratelimit-remaining']
 * @param  msRemaning - timeRemaning(['x-ratelimit-reset'] × 1000)
 * @param  maximumperseconds - upper maximal limit of request permited by the rate limiter each seconds
 * @returns  number of request per seconde in hertz
 */
function possibleReqstPerSecondFunct(reqstRemaining, msRemaning, maximumperseconds = 20) {
    return (floor(max(min(reqstRemaining / sec(msRemaning), maximumperseconds), -1)) ||
        -1);
}
/**
 * calculate from rateLimitReset, the maximum amout of request per seconde
 * (the frequecy)
 * @param  reqstRemaining - ['x-ratelimit-remaining']
 * @param  rateLimitReset -  ['x-ratelimit-reset']
 * @param  maximumperseconds - upper maximal limit of request permited by the rate limiter each seconds
 * @returns  number of request per seconde in hertz
 */
const limitRequestsPerSecond = limitRequestsPerSecondFunct;
exports.limitRequestsPerSecond = limitRequestsPerSecond;
function limitRequestsPerSecondFunct(reqstRemaining, rateLimitReset, maximumperseconds = 20) {
    const msRemaning = timeRemaning(rateLimitReset * 1000);
    return (floor(max(min(reqstRemaining / sec(msRemaning), maximumperseconds), -1)) ||
        -1);
}
// https://github.com/Luxcium/questrade-ts/blob/next/from-v1.2.0-next-20201226/src/private/core/next-rate-limiter/time-keeping-tools.ts#L327
const timeKeepingTools = {
    epochMs,
    epochSec,
    limitRequestsPerSecond,
    miliSecStr,
    milisec,
    minuteStr,
    minutesRemaning,
    possibleReqstPerSecond,
    sec,
    secondeStr,
    secondsRemaning,
    timeRemaning,
};
exports.timeKeepingTools = timeKeepingTools;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGltZS1rZWVwaW5nLXRvb2xzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vc3JjL3ByaXZhdGUvY29yZS9uZXh0LXJhdGUtbGltaXRlci90aW1lLWtlZXBpbmctdG9vbHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7R0EyQkc7OztBQUVILE1BQU0sRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUM7QUFTdkM7Ozs7R0FJRztBQUNILE1BQU0sT0FBTyxHQUFZLFlBQVksQ0FBQztBQXFXcEMsMEJBQU87QUFuV1Q7Ozs7R0FJRztBQUNILFNBQVMsWUFBWTtJQUNuQixPQUFPLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztBQUNwQixDQUFDO0FBVUQsTUFBTSxRQUFRLEdBQWEsYUFBYSxDQUFDO0FBbVZ2Qyw0QkFBUTtBQWpWVjs7OztHQUlHO0FBQ0gsU0FBUyxhQUFhO0lBQ3BCLE9BQU8sSUFBSSxDQUFDLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQztBQUMzQixDQUFDO0FBWUQ7Ozs7O0dBS0c7QUFDSCxNQUFNLFNBQVMsR0FBYyxjQUFjLENBQUM7QUE2VDFDLDhCQUFTO0FBM1RYLFNBQVMsY0FBYyxDQUFDLFdBQW1CO0lBQ3pDLE9BQU8sR0FBRyxLQUFLLENBQUMsV0FBVyxHQUFHLElBQUksR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDO0FBQ2hELENBQUM7QUFZRDs7Ozs7R0FLRztBQUNILE1BQU0sVUFBVSxHQUFlLGVBQWUsQ0FBQztBQTBTN0MsZ0NBQVU7QUF4U1osU0FBUyxlQUFlLENBQUMsV0FBbUI7SUFDMUMsT0FBTyxHQUFHLEtBQUssQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLEdBQUcsRUFBRSxLQUFLLENBQUM7QUFDaEQsQ0FBQztBQVVEOzs7OztHQUtHO0FBQ0gsTUFBTSxVQUFVLEdBQWUsZUFB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QUFDNUksTUFBTSxnQkFBZ0IsR0FBcUI7SUFDekMsT0FBTztJQUNQLFFBQVE7SUFDUixzQkFBc0I7SUFDdEIsVUFBVTtJQUNWLE9BQU87SUFDUCxTQUFTO0lBQ1QsZUFBZTtJQUNmLHNCQUFzQjtJQUN0QixHQUFHO0lBQ0gsVUFBVTtJQUNWLGVBQWU7SUFDZixZQUFZO0NBQ2IsQ0FBQztBQWNBLDRDQUFnQiIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogdGhlIEVDTUFTY3JpcHQgZXBvY2ggYW5kIHRpbWVzdGFtcHNcbiAqXG4gKiBBIEphdmFTY3JpcHQgZGF0ZSBpcyBmdW5kYW1lbnRhbGx5IHNwZWNpZmllZCBhcyB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kc1xuICogdGhhdCBoYXZlIGVsYXBzZWQgc2luY2UgbWlkbmlnaHQgb24gSmFudWFyeSAxLCAxOTcwLCBVVEMuIFRoaXMgZGF0ZSBhbmQgdGltZVxuICogYXJlIG5vdCB0aGUgc2FtZSBhcyB0aGUgVU5JWCBlcG9jaCAodGhlIG51bWJlciBvZiBzZWNvbmRzIHRoYXQgaGF2ZSBlbGFwc2VkXG4gKiBzaW5jZSBtaWRuaWdodCBvbiBKYW51YXJ5IDEsIDE5NzAsIFVUQyksIHdoaWNoIGlzIHRoZSBwcmVkb21pbmFudCBiYXNlIHZhbHVlXG4gKiBmb3IgY29tcHV0ZXItcmVjb3JkZWQgZGF0ZSBhbmQgdGltZSB2YWx1ZXMuXG4gKlxuICogTm90ZTogSXQncyBpbXBvcnRhbnQgdG8ga2VlcCBpbiBtaW5kIHRoYXQgd2hpbGUgdGhlIHRpbWUgdmFsdWUgYXQgdGhlIGhlYXJ0IG9mXG4gKiBhIERhdGUgb2JqZWN0IGlzIFVUQywgdGhlIGJhc2ljIG1ldGhvZHMgdG8gZmV0Y2ggdGhlIGRhdGUgYW5kIHRpbWUgb3IgaXRzXG4gKiBjb21wb25lbnRzIGFsbCB3b3JrIGluIHRoZSBsb2NhbCAoaS5lLiBob3N0IHN5c3RlbSkgdGltZSB6b25lIGFuZCBvZmZzZXQuXG4gKlxuICogSXQgc2hvdWxkIGJlIG5vdGVkIHRoYXQgdGhlIG1heGltdW0gRGF0ZSBpcyBub3Qgb2YgdGhlIHNhbWUgdmFsdWUgYXMgdGhlXG4gKiBtYXhpbXVtIHNhZmUgaW50ZWdlciAoTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIgaXMgOSwwMDcsMTk5LDI1NCw3NDAsOTkxKS5cbiAqIEluc3RlYWQsIGl0IGlzIGRlZmluZWQgaW4gRUNNQS0yNjIgdGhhdCBhIG1heGltdW0gb2YgwrExMDAsMDAwLDAwMCAob25lIGh1bmRyZWRcbiAqIG1pbGxpb24pIGRheXMgcmVsYXRpdmUgdG8gSmFudWFyeSAxLCAxOTcwIFVUQyAodGhhdCBpcywgQXByaWwgMjAsIDI3MTgyMSBCQ0UgflxuICogU2VwdGVtYmVyIDEzLCAyNzU3NjAgQ0UpIGNhbiBiZSByZXByZXNlbnRlZCBieSB0aGUgc3RhbmRhcmQgRGF0ZSBvYmplY3RcbiAqIChlcXVpdmFsZW50IHRvIMKxOCw2NDAsMDAwLDAwMCwwMDAsMDAwIG1pbGxpc2Vjb25kcykuXG4gKlxuICpcbiAqIERhdGUubm93KClcbiAqXG4gKiBSZXR1cm5zIHRoZSBudW1lcmljIHZhbHVlIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGN1cnJlbnQgdGltZeKAlHRoZSBudW1iZXIgb2ZcbiAqIG1pbGxpc2Vjb25kcyBlbGFwc2VkIHNpbmNlIEphbnVhcnkgMSwgMTk3MCAwMDowMDowMCBVVEMsIHdpdGggbGVhcCBzZWNvbmRzXG4gKiBpZ25vcmVkLlxuICpcbiAqL1xuXG5jb25zdCB7IGNlaWwsIGZsb29yLCBtYXgsIG1pbiB9ID0gTWF0aDtcblxuLy8g4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCVLT5cbi8qKlxuICogcmV0dXJucyB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBlbGFwc2VkIHNpbmNlXG4gKiBKYW51YXJ5IDEsIDE5NzAgMDA6MDA6MDAgVVRDLCB3aXRoIGxlYXAgc2Vjb25kcyBpZ25vcmVkLlxuICogQHJldHVybnMgIG1pbGxpc2Vjb25kc1xuICovXG50eXBlIEVwb2NoTXMgPSAoKSA9PiBudW1iZXI7XG4vKipcbiAqIHJldHVybnMgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgZWxhcHNlZCBzaW5jZVxuICogSmFudWFyeSAxLCAxOTcwIDAwOjAwOjAwIFVUQywgd2l0aCBsZWFwIHNlY29uZHMgaWdub3JlZC5cbiAqIEByZXR1cm5zICBtaWxsaXNlY29uZHNcbiAqL1xuY29uc3QgZXBvY2hNczogRXBvY2hNcyA9IGVwb2NoTXNGdW5jdDtcblxuLyoqXG4gKiByZXR1cm5zIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGVsYXBzZWQgc2luY2VcbiAqIEphbnVhcnkgMSwgMTk3MCAwMDowMDowMCBVVEMsIHdpdGggbGVhcCBzZWNvbmRzIGlnbm9yZWQuXG4gKiBAcmV0dXJucyAgbWlsbGlzZWNvbmRzXG4gKi9cbmZ1bmN0aW9uIGVwb2NoTXNGdW5jdCgpOiBudW1iZXIge1xuICByZXR1cm4gRGF0ZS5ub3coKTtcbn1cblxuLy8g4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCVLT5cbi8qKlxuICogcmV0dXJucyB0aGUgbnVtYmVyIG9mIHNlY29uZHMgZWxhcHNlZCBzaW5jZVxuICogSmFudWFyeSAxLCAxOTcwIDAwOjAwOjAwIFVUQywgd2l0aCBsZWFwIHNlY29uZHMgaWdub3JlZC5cbiAqIEByZXR1cm5zICBzZWNvbmRzXG4gKi9cbnR5cGUgRXBvY2hTZWMgPSAoKSA9PiBudW1iZXI7XG5cbmNvbnN0IGVwb2NoU2VjOiBFcG9jaFNlYyA9IGVwb2NoU2VjRnVuY3Q7XG5cbi8qKlxuICogcmV0dXJucyB0aGUgbnVtYmVyIG9mIHNlY29uZHMgZWxhcHNlZCBzaW5jZVxuICogSmFudWFyeSAxLCAxOTcwIDAwOjAwOjAwIFVUQywgd2l0aCBsZWFwIHNlY29uZHMgaWdub3JlZC5cbiAqIEByZXR1cm5zICBzZWNvbmRzXG4gKi9cbmZ1bmN0aW9uIGVwb2NoU2VjRnVuY3QoKTogbnVtYmVyIHtcbiAgcmV0dXJuIERhdGUubm93KCkgLyAxMDAwO1xufVxuXG4vLyDigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJUtPlxuXG4vKipcbiAqIGV4dHJhY3QgdGhlIG1pbnV0ZXMgcGFydCBvZiBhbmQgYW1vdXQgb2YgbWlsaXNlY29uZHMuXG4gKiBAcGFyYW0gIG1pbGlzZWNvbmRzIC0gVGhlIG51bWJlciBvZiBtaWxpc2Vjb25kcyBmcm9tIHdoaWNoIHRvXG4gKiBleHRyYWN0IHRoZSBtaW51dGUocykgcm91bmRlZCBmbG9vciBwYXJ0LlxuICogQHJldHVybnMgIEZvcm1hdGVkIHN0cmluZyBgWGBtaW5cbiAqL1xudHlwZSBNaW51dGVTdHIgPSAobWlsaXNlY29uZHM6IG51bWJlcikgPT4gc3RyaW5nO1xuXG4vKipcbiAqIGV4dHJhY3QgdGhlIG1pbnV0ZXMgcGFydCBvZiBhbmQgYW1vdXQgb2YgbWlsaXNlY29uZHMuXG4gKiBAcGFyYW0gIG1pbGlzZWNvbmRzIC0gVGhlIG51bWJlciBvZiBtaWxpc2Vjb25kcyBmcm9tIHdoaWNoIHRvXG4gKiBleHRyYWN0IHRoZSBtaW51dGUocykgcm91bmRlZCBmbG9vciBwYXJ0LlxuICogQHJldHVybnMgIEZvcm1hdGVkIHN0cmluZyBgWGBtaW5cbiAqL1xuY29uc3QgbWludXRlU3RyOiBNaW51dGVTdHIgPSBtaW51dGVTdHJGdW5jdDtcblxuZnVuY3Rpb24gbWludXRlU3RyRnVuY3QobWlsaXNlY29uZHM6IG51bWJlcik6IHN0cmluZyB7XG4gIHJldHVybiBgJHtmbG9vcihtaWxpc2Vjb25kcyAvIDEwMDAgLyA2MCl9bWluYDtcbn1cblxuLy8g4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCVLT5cblxuLyoqXG4gKiBleHRyYWN0IHRoZSByZXN0IHBhcnQgaW4gc2Vjb25kcyBmcm9tIG1pbGlzZWNvbmRzIGRlZHVjdGVkIGZyb20gdGhlIG1pbnV0ZXMuXG4gKiBAcGFyYW0gIG1pbGlzZWNvbmRzIC0gVGhlIG51bWJlciBvZiBtaWxpc2Vjb25kcyBmcm9tIHdoaWNoIHRvXG4gKiBleHRyYWN0IHRoZSBzZWNvbmQocykgcm91bmRlZCBmbG9vciBwYXJ0LlxuICogQHJldHVybnMgIEZvcm1hdGVkIHN0cmluZyBgWGBzZWNcbiAqL1xudHlwZSBTZWNvbmRlU3RyID0gKG1pbGlzZWNvbmRzOiBudW1iZXIpID0+IHN0cmluZztcblxuLyoqXG4gKiBleHRyYWN0IHRoZSByZXN0IHBhcnQgaW4gc2Vjb25kcyBmcm9tIG1pbGlzZWNvbmRzIGRlZHVjdGVkIGZyb20gdGhlIG1pbnV0ZXMuXG4gKiBAcGFyYW0gIG1pbGlzZWNvbmRzIC0gVGhlIG51bWJlciBvZiBtaWxpc2Vjb25kcyBmcm9tIHdoaWNoIHRvXG4gKiBleHRyYWN0IHRoZSBzZWNvbmQocykgcm91bmRlZCBmbG9vciBwYXJ0LlxuICogQHJldHVybnMgIEZvcm1hdGVkIHN0cmluZyBgWGBzZWNcbiAqL1xuY29uc3Qgc2Vjb25kZVN0cjogU2Vjb25kZVN0ciA9IHNlY29uZGVTdHJGdW5jdDtcblxuZnVuY3Rpb24gc2Vjb25kZVN0ckZ1bmN0KG1pbGlzZWNvbmRzOiBudW1iZXIpOiBzdHJpbmcge1xuICByZXR1cm4gYCR7Zmxvb3IobWlsaXNlY29uZHMgLyAxMDAwKSAlIDYwfXNlY2A7XG59XG5cbi8vIOKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAlS0+XG4vKipcbiAqIGV4dHJhY3QgdGhlIHJlc3QgcGFydCBpbiBtaWxpc2Vjb25kcyBhZnRlciBkZWR1Y3RpbmcgZnJvbSB0aGUgc2Vjb25kcy5cbiAqIEBwYXJhbSAgbWlsaXNlY29uZHMgLSBUaGUgbnVtYmVyIG9mIG1pbGlzZWNvbmRzIGZyb20gd2hpY2ggdG9cbiAqIGV4dHJhY3QgcmVzdCByb3VuZGVkIGZsb29yIHBhcnQuXG4gKiBAcmV0dXJucyAgRm9ybWF0ZWQgc3RyaW5nIGBYYG1zXG4gKi9cbnR5cGUgTWlsaVNlY1N0ciA9IChtaWxpc2Vjb25kczogbnVtYmVyKSA9PiBzdHJpbmc7XG4vKipcbiAqIGV4dHJhY3QgdGhlIHJlc3QgcGFydCBpbiBtaWxpc2Vjb25kcyBhZnRlciBkZWR1Y3RpbmcgZnJvbSB0aGUgc2Vjb25kcy5cbiAqIEBwYXJhbSAgbWlsaXNlY29uZHMgLSBUaGUgbnVtYmVyIG9mIG1pbGlzZWNvbmRzIGZyb20gd2hpY2ggdG9cbiAqIGV4dHJhY3QgcmVzdCByb3VuZGVkIGZsb29yIHBhcnQuXG4gKiBAcmV0dXJucyAgRm9ybWF0ZWQgc3RyaW5nIGBYYG1zXG4gKi9cbmNvbnN0IG1pbGlTZWNTdHI6IE1pbGlTZWNTdHIgPSBtaWxpU2VjU3RyRnVuY3Q7XG5cbmZ1bmN0aW9uIG1pbGlTZWNTdHJGdW5jdChtaWxpc2Vjb25kczogbnVtYmVyKTogc3RyaW5nIHtcbiAgcmV0dXJuIGAke2Zsb29yKG1pbGlzZWNvbmRzICUgMTAwMCl9bXNgO1xufVxuXG4vLyDigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJUtPlxuLyoqXG4gKiBjb252ZXJ0IHNlY29uZHMgdG8gbWlsaXNlY29uZHMgKHNlY29uZHMgw5cgMTAwMClcbiAqIEBwYXJhbSAgc2Vjb25kcyAtIG51bWJlciBvZiBzZWNvbmRzIHRvIGNvbnZlcnQgaW4gbWlsaXNlY29uZHNcbiAqIEByZXR1cm5zICBtaWxpc2Vjb25kc1xuICovXG50eXBlIE1pbGlzZWMgPSAoc2Vjb25kczogbnVtYmVyKSA9PiBudW1iZXI7XG4vKipcbiAqIGNvbnZlcnQgc2Vjb25kcyB0byBtaWxpc2Vjb25kcyAoc2Vjb25kcyDDlyAxMDAwKVxuICogQHBhcmFtICBzZWNvbmRzIC0gbnVtYmVyIG9mIHNlY29uZHMgdG8gY29udmVydCBpbiBtaWxpc2Vjb25kc1xuICogQHJldHVybnMgIG1pbGlzZWNvbmRzXG4gKi9cbmNvbnN0IG1pbGlzZWM6IE1pbGlzZWMgPSBtaWxpc2VjRnVuY3Q7XG5cbmZ1bmN0aW9uIG1pbGlzZWNGdW5jdChzZWNvbmRzOiBudW1iZXIpOiBudW1iZXIge1xuICByZXR1cm4gc2Vjb25kcyAqIDEwMDA7XG59XG5cbi8vIOKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAlS0+XG4vKipcbiAqIGNvbnZlcnQgbWlsaXNlY29uZHMgdG8gc2Vjb25kcyBjZWxpKG1pbGlzZWNvbmRzIMO3IDEwMDApXG4gKiBAcGFyYW0gIG1pbGlzZWNvbmRzIC0gbnVtYmVyIG9mIG1pbGlzZWNvbmRzIHRvIGNvbnZlcnQgaW4gc2Vjb25kc1xuICogQHJldHVybnMgIHNlY29uZHNcbiAqL1xudHlwZSBTZWMgPSAobWlsaXNlY29uZHM6IG51bWJlcikgPT4gbnVtYmVyO1xuLyoqXG4gKiBjb252ZXJ0IG1pbGlzZWNvbmRzIHRvIHNlY29uZHMgY2VsaShtaWxpc2Vjb25kcyDDtyAxMDAwKVxuICogQHBhcmFtICBtaWxpc2Vjb25kcyAtIG51bWJlciBvZiBtaWxpc2Vjb25kcyB0byBjb252ZXJ0IGluIHNlY29uZHNcbiAqIEByZXR1cm5zICBzZWNvbmRzXG4gKi9cbmNvbnN0IHNlYzogU2VjID0gc2VjRnVuY3Q7XG5cbmZ1bmN0aW9uIHNlY0Z1bmN0KG1pbGlzZWNvbmRzOiBudW1iZXIpOiBudW1iZXIge1xuICByZXR1cm4gY2VpbChtaWxpc2Vjb25kcyAvIDEwMDApO1xufVxuXG4vLyDigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJXigJUtPlxuLyoqXG4gKiBjYWxjdWxhdGUgdGhlIGFtb3V0IG9mIG1pbGlzZWNvbmRzIHJlbWFpbmluZyBmcm9tIG5vdyB1bnRpbCBhIGZ1dHVyZSBtaWxpc2Vjb25kXG4gKiBlcG9jaCByZXR1cm4gLTEgaWYgZXBvY2ggaXMgaW4gdGhlIHBhc3Qgb3IgaWYgcmVzdWx0IGlzIDBcbiAqIEBwYXJhbSAgbGF0ZXJNcyAtIGZ1dHVyZSB1bml4IGVwb2NoIGluIG1pbGlzZWNvbmRzXG4gKiBAcmV0dXJucyAgbWlsaXNlY29uZHMgcmVtYWluaW5nIGZyb20gbm93IHVudGlsIGxhdGVyTXNcbiAqL1xudHlwZSBUaW1lUmVtYW5pbmcgPSAobGF0ZXJNczogbnVtYmVyKSA9PiBudW1iZXI7XG4vKipcbiAqIGNhbGN1bGF0ZSB0aGUgYW1vdXQgb2YgbWlsaXNlY29uZHMgcmVtYWluaW5nIGZyb20gbm93IHVudGlsIGEgZnV0dXJlIG1pbGlzZWNvbmRcbiAqIGVwb2NoIHJldHVybiAtMSBpZiBlcG9jaCBpcyBpbiB0aGUgcGFzdCBvciBpZiByZXN1bHQgaXMgMFxuICogQHBhcmFtICBsYXRlck1zIC0gZnV0dXJlIHVuaXggZXBvY2ggaW4gbWlsaXNlY29uZHNcbiAqIEByZXR1cm5zICBtaWxpc2Vjb25kcyByZW1haW5pbmcgZnJvbSBub3cgdW50aWwgbGF0ZXJNc1xuICovXG5jb25zdCB0aW1lUmVtYW5pbmc6IFRpbWVSZW1hbmluZyA9IHRpbWVSZW1hbmluZ0Z1bmN0O1xuXG5mdW5jdGlvbiB0aW1lUmVtYW5pbmdGdW5jdChsYXRlck1zOiBudW1iZXIpOiBudW1iZXIge1xuICBjb25zdCBub3dNcyA9IGVwb2NoTXMoKTtcblxuICBpZiAobm93TXMgPiBsYXRlck1zKSB7XG4gICAgcmV0dXJuIC0xO1xuICB9XG5cbiAgcmV0dXJuIGxhdGVyTXMgLSBub3dNcyB8fCAtMTtcbn1cblxuLy8g4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCVLT5cbi8qKlxuICogY2FsY3VsYXRlIHRoZSBhbW91dCBvZiBtaW51dGVzIHJlbWFpbmluZyBmcm9tIG5vdyB1bnRpbCBhIGZ1dHVyZSBtaWxpc2Vjb25kXG4gKiBlcG9jaCByZXR1cm4gLTEgaWYgZXBvY2ggaXMgaW4gdGhlIHBhc3Qgb3IgaWYgcmVzdWx0IGlzIDBcbiAqIEBwYXJhbSAgbGF0ZXJNcyAtIGZ1dHVyZSB1bml4IGVwb2NoIGluIG1pbGlzZWNvbmRzXG4gKiBAcmV0dXJucyAgbWlsaXNlY29uZHMgZnJvbSBub3cgdW50aWwgbGF0ZXJNc1xuICovXG50eXBlIE1pbnV0ZXNSZW1hbmluZyA9IChsYXRlck1zOiBudW1iZXIpID0+IG51bWJlcjtcbi8qKlxuICogY2FsY3VsYXRlIHRoZSBhbW91dCBvZiBtaW51dGVzIHJlbWFpbmluZyBmcm9tIG5vdyB1bnRpbCBhIGZ1dHVyZSBtaWxpc2Vjb25kXG4gKiBlcG9jaCByZXR1cm4gLTEgaWYgZXBvY2ggaXMgaW4gdGhlIHBhc3Qgb3IgaWYgcmVzdWx0IGlzIDBcbiAqIEBwYXJhbSAgbGF0ZXJNcyAtIGZ1dHVyZSB1bml4IGVwb2NoIGluIG1pbGlzZWNvbmRzXG4gKiBAcmV0dXJucyAgbWlsaXNlY29uZHMgZnJvbSBub3cgdW50aWwgbGF0ZXJNc1xuICovXG5jb25zdCBtaW51dGVzUmVtYW5pbmc6IE1pbnV0ZXNSZW1hbmluZyA9IG1pbnV0ZXNSZW1hbmluZ0Z1bmN0O1xuXG5mdW5jdGlvbiBtaW51dGVzUmVtYW5pbmdGdW5jdChsYXRlck1zOiBudW1iZXIpOiBudW1iZXIge1xuICBjb25zdCB2YWx1ZSA9IGNlaWwodGltZVJlbWFuaW5nKGxhdGVyTXMpIC8gKDYwICogMTAwMCkpO1xuXG4gIGlmICh2YWx1ZSA+IDApIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cblxuICByZXR1cm4gLTE7XG59XG5cbi8vIOKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAlS0+XG4vKipcbiAqIGNhbGN1bGF0ZSB0aGUgYW1vdXQgb2Ygc2Vjb25kcyByZW1haW5pbmcgZnJvbSBub3cgdW50aWwgYSBmdXR1cmUgbWlsaXNlY29uZFxuICogZXBvY2ggcmV0dXJuIC0xIGlmIGVwb2NoIGlzIGluIHRoZSBwYXN0IG9yIGlmIHJlc3VsdCBpcyAwXG4gKiBAcGFyYW0gIGxhdGVyTXMgLSBmdXR1cmUgdW5peCBlcG9jaCBpbiBtaWxpc2Vjb25kc1xuICogQHJldHVybnMgIHNlY29uZHMgZnJvbSBub3cgdW50aWwgbGF0ZXJNcy5cbiAqIFJlc3VsdCBzaG91bGQgYmUgY29uc2lkZXIgYXMgXCJsZXNzIHRoYW5cIiBYIHNlY29uZGUocykuXG4gKi9cbnR5cGUgU2Vjb25kc1JlbWFuaW5nID0gKGxhdGVyTXM6IG51bWJlcikgPT4gbnVtYmVyO1xuLyoqXG4gKiBjYWxjdWxhdGUgdGhlIGFtb3V0IG9mIHNlY29uZHMgcmVtYWluaW5nIGZyb20gbm93IHVudGlsIGEgZnV0dXJlIG1pbGlzZWNvbmRcbiAqIGVwb2NoIHJldHVybiAtMSBpZiBlcG9jaCBpcyBpbiB0aGUgcGFzdCBvciBpZiByZXN1bHQgaXMgMFxuICogQHBhcmFtICBsYXRlck1zIC0gZnV0dXJlIHVuaXggZXBvY2ggaW4gbWlsaXNlY29uZHNcbiAqIEByZXR1cm5zICBzZWNvbmRzIGZyb20gbm93IHVudGlsIGxhdGVyTXMuXG4gKiBSZXN1bHQgc2hvdWxkIGJlIGNvbnNpZGVyIGFzIFwibGVzcyB0aGFuXCIgWCBzZWNvbmRlKHMpLlxuICovXG5jb25zdCBzZWNvbmRzUmVtYW5pbmc6IFNlY29uZHNSZW1hbmluZyA9IHNlY29uZHNSZW1hbmluZ0Z1bmN0O1xuXG5mdW5jdGlvbiBzZWNvbmRzUmVtYW5pbmdGdW5jdChsYXRlck1zOiBudW1iZXIpOiBudW1iZXIge1xuICBjb25zdCB2YWx1ZSA9IGNlaWwodGltZVJlbWFuaW5nKGxhdGVyTXMpIC8gMTAwMCk7XG5cbiAgaWYgKHZhbHVlID4gMCkge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuXG4gIHJldHVybiAtMTtcbn1cblxuLy8g4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCV4oCVLT5cbi8qKlxuICogY2FsY3VsYXRlIGZyb20gbXNSZW1hbmluZywgdGhlIG1heGltdW0gYW1vdXQgb2YgcmVxdWVzdCBwZXIgc2Vjb25kZVxuICogKHRoZSBmcmVxdWVjeSlcbiAqIEBwYXJhbSAgcmVxc3RSZW1haW5pbmcgLSBbJ3gtcmF0ZWxpbWl0LXJlbWFpbmluZyddXG4gKiBAcGFyYW0gIG1zUmVtYW5pbmcgLSB0aW1lUmVtYW5pbmcoWyd4LXJhdGVsaW1pdC1yZXNldCddIMOXIDEwMDApXG4gKiBAcGFyYW0gIG1heGltdW1wZXJzZWNvbmRzIC0gdXBwZXIgbWF4aW1hbCBsaW1pdCBvZiByZXF1ZXN0IHBlcm1pdGVkIGJ5IHRoZSByYXRlIGxpbWl0ZXIgZWFjaCBzZWNvbmRzXG4gKiBAcmV0dXJucyAgbnVtYmVyIG9mIHJlcXVlc3QgcGVyIHNlY29uZGUgaW4gaGVydHpcbiAqL1xudHlwZSBQb3NzaWJsZVJlcXN0UGVyU2Vjb25kID0gKFxuICByZXFzdFJlbWFpbmluZzogbnVtYmVyLFxuICBtc1JlbWFuaW5nOiBudW1iZXIsXG4gIG1heGltdW1wZXJzZWNvbmRzPzogbnVtYmVyLFxuKSA9PiBudW1iZXI7XG4vKipcbiAqIGNhbGN1bGF0ZSBmcm9tIG1zUmVtYW5pbmcsIHRoZSBtYXhpbXVtIGFtb3V0IG9mIHJlcXVlc3QgcGVyIHNlY29uZGVcbiAqICh0aGUgZnJlcXVlY3kpXG4gKiBAcGFyYW0gIHJlcXN0UmVtYWluaW5nIC0gWyd4LXJhdGVsaW1pdC1yZW1haW5pbmcnXVxuICogQHBhcmFtICBtc1JlbWFuaW5nIC0gdGltZVJlbWFuaW5nKFsneC1yYXRlbGltaXQtcmVzZXQnXSDDlyAxMDAwKVxuICogQHBhcmFtICBtYXhpbXVtcGVyc2Vjb25kcyAtIHVwcGVyIG1heGltYWwgbGltaXQgb2YgcmVxdWVzdCBwZXJtaXRlZCBieSB0aGUgcmF0ZSBsaW1pdGVyIGVhY2ggc2Vjb25kc1xuICogQHJldHVybnMgIG51bWJlciBvZiByZXF1ZXN0IHBlciBzZWNvbmRlIGluIGhlcnR6XG4gKi9cbmNvbnN0IHBvc3NpYmxlUmVxc3RQZXJTZWNvbmQ6IFBvc3NpYmxlUmVxc3RQZXJTZWNvbmQgPSBwb3NzaWJsZVJlcXN0UGVyU2Vjb25kRnVuY3Q7XG5cbi8qKlxuICogY2FsY3VsYXRlIGZyb20gbXNSZW1hbmluZywgdGhlIG1heGltdW0gYW1vdXQgb2YgcmVxdWVzdCBwZXIgc2Vjb25kZVxuICogKHRoZSBmcmVxdWVjeSlcbiAqIEBwYXJhbSAgcmVxc3RSZW1haW5pbmcgLSBbJ3gtcmF0ZWxpbWl0LXJlbWFpbmluZyddXG4gKiBAcGFyYW0gIG1zUmVtYW5pbmcgLSB0aW1lUmVtYW5pbmcoWyd4LXJhdGVsaW1pdC1yZXNldCddIMOXIDEwMDApXG4gKiBAcGFyYW0gIG1heGltdW1wZXJzZWNvbmRzIC0gdXBwZXIgbWF4aW1hbCBsaW1pdCBvZiByZXF1ZXN0IHBlcm1pdGVkIGJ5IHRoZSByYXRlIGxpbWl0ZXIgZWFjaCBzZWNvbmRzXG4gKiBAcmV0dXJucyAgbnVtYmVyIG9mIHJlcXVlc3QgcGVyIHNlY29uZGUgaW4gaGVydHpcbiAqL1xuZnVuY3Rpb24gcG9zc2libGVSZXFzdFBlclNlY29uZEZ1bmN0KFxuICByZXFzdFJlbWFpbmluZzogbnVtYmVyLFxuICBtc1JlbWFuaW5nOiBudW1iZXIsXG4gIG1heGltdW1wZXJzZWNvbmRzID0gMjAsXG4pOiBudW1iZXIge1xuICByZXR1cm4gKFxuICAgIGZsb29yKG1heChtaW4ocmVxc3RSZW1haW5pbmcgLyBzZWMobXNSZW1hbmluZyksIG1heGltdW1wZXJzZWNvbmRzKSwgLTEpKSB8fFxuICAgIC0xXG4gICk7XG59XG5cbi8vIOKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAleKAlS0+XG4vKipcbiAqIGNhbGN1bGF0ZSBmcm9tIHJhdGVMaW1pdFJlc2V0LCB0aGUgbWF4aW11bSBhbW91dCBvZiByZXF1ZXN0IHBlciBzZWNvbmRlXG4gKiAodGhlIGZyZXF1ZWN5KVxuICogQHBhcmFtICAgcmVxc3RSZW1haW5pbmcgLSBbJ3gtcmF0ZWxpbWl0LXJlbWFpbmluZyddXG4gKiBAcGFyYW0gICBtc1JlbWFuaW5nIC1cbiAqIEBwYXJhbSAgIG1heGltdW1wZXJzZWNvbmRzIC0gdXBwZXIgbWF4aW1hbCBsaW1pdCBvZiByZXF1ZXN0IHBlcm1pdGVkIGJ5IHRoZSByYXRlIGxpbWl0ZXIgZWFjaCBzZWNvbmRzXG4gKiBAcmV0dXJucyAgIG51bWJlciBvZiByZXF1ZXN0IHBlciBzZWNvbmRlIGluIGhlcnR6XG4gKi9cbnR5cGUgTGltaXRSZXF1ZXN0c1BlclNlY29uZCA9IChcbiAgcmVxc3RSZW1haW5pbmc6IG51bWJlcixcbiAgbXNSZW1hbmluZzogbnVtYmVyLFxuICBtYXhpbXVtcGVyc2Vjb25kcz86IG51bWJlcixcbikgPT4gbnVtYmVyO1xuLyoqXG4gKiBjYWxjdWxhdGUgZnJvbSByYXRlTGltaXRSZXNldCwgdGhlIG1heGltdW0gYW1vdXQgb2YgcmVxdWVzdCBwZXIgc2Vjb25kZVxuICogKHRoZSBmcmVxdWVjeSlcbiAqIEBwYXJhbSAgcmVxc3RSZW1haW5pbmcgLSBbJ3gtcmF0ZWxpbWl0LXJlbWFpbmluZyddXG4gKiBAcGFyYW0gIHJhdGVMaW1pdFJlc2V0IC0gIFsneC1yYXRlbGltaXQtcmVzZXQnXVxuICogQHBhcmFtICBtYXhpbXVtcGVyc2Vjb25kcyAtIHVwcGVyIG1heGltYWwgbGltaXQgb2YgcmVxdWVzdCBwZXJtaXRlZCBieSB0aGUgcmF0ZSBsaW1pdGVyIGVhY2ggc2Vjb25kc1xuICogQHJldHVybnMgIG51bWJlciBvZiByZXF1ZXN0IHBlciBzZWNvbmRlIGluIGhlcnR6XG4gKi9cbmNvbnN0IGxpbWl0UmVxdWVzdHNQZXJTZWNvbmQ6IExpbWl0UmVxdWVzdHNQZXJTZWNvbmQgPSBsaW1pdFJlcXVlc3RzUGVyU2Vjb25kRnVuY3Q7XG5cbmZ1bmN0aW9uIGxpbWl0UmVxdWVzdHNQZXJTZWNvbmRGdW5jdChcbiAgcmVxc3RSZW1haW5pbmc6IG51bWJlcixcbiAgcmF0ZUxpbWl0UmVzZXQ6IG51bWJlcixcbiAgbWF4aW11bXBlcnNlY29uZHMgPSAyMCxcbik6IG51bWJlciB7XG4gIGNvbnN0IG1zUmVtYW5pbmcgPSB0aW1lUmVtYW5pbmcocmF0ZUxpbWl0UmVzZXQgKiAxMDAwKTtcblxuICByZXR1cm4gKFxuICAgIGZsb29yKG1heChtaW4ocmVxc3RSZW1haW5pbmcgLyBzZWMobXNSZW1hbmluZyksIG1heGltdW1wZXJzZWNvbmRzKSwgLTEpKSB8fFxuICAgIC0xXG4gICk7XG59XG5cbmludGVyZmFjZSBUaW1lS2VlcGluZ1Rvb2xzIHtcbiAgLyoqXG4gICAqIHJldHVybnMgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgZWxhcHNlZCBzaW5jZVxuICAgKiBKYW51YXJ5IDEsIDE5NzAgMDA6MDA6MDAgVVRDLCB3aXRoIGxlYXAgc2Vjb25kcyBpZ25vcmVkLlxuICAgKiBAcmV0dXJucyAgbWlsbGlzZWNvbmRzXG4gICAqL1xuICBlcG9jaE1zOiBFcG9jaE1zO1xuICAvKipcbiAgICogcmV0dXJucyB0aGUgbnVtYmVyIG9mIHNlY29uZHMgZWxhcHNlZCBzaW5jZVxuICAgKiBKYW51YXJ5IDEsIDE5NzAgMDA6MDA6MDAgVVRDLCB3aXRoIGxlYXAgc2Vjb25kcyBpZ25vcmVkLlxuICAgKiBAcmV0dXJucyAgc2Vjb25kc1xuICAgKi9cbiAgZXBvY2hTZWM6IEVwb2NoU2VjO1xuICAvKipcbiAgICogY2FsY3VsYXRlIGZyb20gcmF0ZUxpbWl0UmVzZXQsIHRoZSBtYXhpbXVtIGFtb3V0IG9mIHJlcXVlc3QgcGVyIHNlY29uZGVcbiAgICogKHRoZSBmcmVxdWVjeSlcbiAgICogQHBhcmFtICByZXFzdFJlbWFpbmluZyAtIFsneC1yYXRlbGltaXQtcmVtYWluaW5nJ11cbiAgICogQHBhcmFtICByYXRlTGltaXRSZXNldCAtICBbJ3gtcmF0ZWxpbWl0LXJlc2V0J11cbiAgICogQHBhcmFtICBtYXhpbXVtcGVyc2Vjb25kcyAtIHVwcGVyIG1heGltYWwgbGltaXQgb2YgcmVxdWVzdCBwZXJtaXRlZCBieSB0aGUgcmF0ZSBsaW1pdGVyIGVhY2ggc2Vjb25kc1xuICAgKiBAcmV0dXJucyAgbnVtYmVyIG9mIHJlcXVlc3QgcGVyIHNlY29uZGUgaW4gaGVydHpcbiAgICovXG4gIGxpbWl0UmVxdWVzdHNQZXJTZWNvbmQ6IExpbWl0UmVxdWVzdHNQZXJTZWNvbmQ7XG4gIC8qKlxuICAgKiBjb252ZXJ0IHNlY29uZHMgdG8gbWlsaXNlY29uZHMgKHNlY29uZHMgw5cgMTAwMClcbiAgICogQHBhcmFtICBzZWNvbmRzIC0gbnVtYmVyIG9mIHNlY29uZHMgdG8gY29udmVydCBpbiBtaWxpc2Vjb25kc1xuICAgKiBAcmV0dXJucyAgbWlsaXNlY29uZHNcbiAgICovXG4gIG1pbGlzZWM6IE1pbGlzZWM7XG4gIG1pbGlTZWNTdHI6IE1pbGlTZWNTdHI7XG4gIG1pbnV0ZXNSZW1hbmluZzogTWludXRlc1JlbWFuaW5nO1xuICBtaW51dGVTdHI6IE1pbnV0ZVN0cjtcbiAgLyoqXG4gICAqIGNhbGN1bGF0ZSBmcm9tIG1zUmVtYW5pbmcsIHRoZSBtYXhpbXVtIGFtb3V0IG9mIHJlcXVlc3QgcGVyIHNlY29uZGVcbiAgICogKHRoZSBmcmVxdWVjeSlcbiAgICogQHBhcmFtICByZXFzdFJlbWFpbmluZyAtIFsneC1yYXRlbGltaXQtcmVtYWluaW5nJ11cbiAgICogQHBhcmFtICBtc1JlbWFuaW5nIC0gdGltZVJlbWFuaW5nKFsneC1yYXRlbGltaXQtcmVzZXQnXSDDlyAxMDAwKVxuICAgKiBAcGFyYW0gIG1heGltdW1wZXJzZWNvbmRzIC0gdXBwZXIgbWF4aW1hbCBsaW1pdCBvZiByZXF1ZXN0IHBlcm1pdGVkIGJ5IHRoZSByYXRlIGxpbWl0ZXIgZWFjaCBzZWNvbmRzXG4gICAqIEByZXR1cm5zICBudW1iZXIgb2YgcmVxdWVzdCBwZXIgc2Vjb25kZSBpbiBoZXJ0elxuICAgKi9cbiAgcG9zc2libGVSZXFzdFBlclNlY29uZDogUG9zc2libGVSZXFzdFBlclNlY29uZDtcbiAgLyoqXG4gICAqIGNvbnZlcnQgbWlsaXNlY29uZHMgdG8gc2Vjb25kcyBjZWxpKG1pbGlzZWNvbmRzIMO3IDEwMDApXG4gICAqIEBwYXJhbSAgbWlsaXNlY29uZHMgLSBudW1iZXIgb2YgbWlsaXNlY29uZHMgdG8gY29udmVydCBpbiBzZWNvbmRzXG4gICAqIEByZXR1cm5zICBzZWNvbmRzXG4gICAqL1xuICBzZWM6IFNlYztcbiAgc2Vjb25kZVN0cjogU2Vjb25kZVN0cjtcbiAgc2Vjb25kc1JlbWFuaW5nOiBTZWNvbmRzUmVtYW5pbmc7XG4gIHRpbWVSZW1hbmluZzogVGltZVJlbWFuaW5nO1xufVxuLy8gaHR0cHM6Ly9naXRodWIuY29tL0x1eGNpdW0vcXVlc3RyYWRlLXRzL2Jsb2IvbmV4dC9mcm9tLXYxLjIuMC1uZXh0LTIwMjAxMjI2L3NyYy9wcml2YXRlL2NvcmUvbmV4dC1yYXRlLWxpbWl0ZXIvdGltZS1rZWVwaW5nLXRvb2xzLnRzI0wzMjdcbmNvbnN0IHRpbWVLZWVwaW5nVG9vbHM6IFRpbWVLZWVwaW5nVG9vbHMgPSB7XG4gIGVwb2NoTXMsXG4gIGVwb2NoU2VjLFxuICBsaW1pdFJlcXVlc3RzUGVyU2Vjb25kLFxuICBtaWxpU2VjU3RyLFxuICBtaWxpc2VjLFxuICBtaW51dGVTdHIsXG4gIG1pbnV0ZXNSZW1hbmluZyxcbiAgcG9zc2libGVSZXFzdFBlclNlY29uZCxcbiAgc2VjLFxuICBzZWNvbmRlU3RyLFxuICBzZWNvbmRzUmVtYW5pbmcsXG4gIHRpbWVSZW1hbmluZyxcbn07XG5cbmV4cG9ydCB7XG4gIGVwb2NoTXMsXG4gIGVwb2NoU2VjLFxuICBsaW1pdFJlcXVlc3RzUGVyU2Vjb25kLFxuICBtaWxpc2VjLFxuICBtaWxpU2VjU3RyLFxuICBtaW51dGVzUmVtYW5pbmcsXG4gIG1pbnV0ZVN0cixcbiAgcG9zc2libGVSZXFzdFBlclNlY29uZCxcbiAgc2VjLFxuICBzZWNvbmRlU3RyLFxuICBzZWNvbmRzUmVtYW5pbmcsXG4gIHRpbWVLZWVwaW5nVG9vbHMsXG4gIHRpbWVSZW1hbmluZyxcbn07XG5leHBvcnQgdHlwZSB7XG4gIEVwb2NoTXMsXG4gIEVwb2NoU2VjLFxuICBMaW1pdFJlcXVlc3RzUGVyU2Vjb25kLFxuICBNaWxpc2VjLFxuICBNaWxpU2VjU3RyLFxuICBNaW51dGVzUmVtYW5pbmcsXG4gIE1pbnV0ZVN0cixcbiAgUG9zc2libGVSZXFzdFBlclNlY29uZCxcbiAgU2VjLFxuICBTZWNvbmRlU3RyLFxuICBTZWNvbmRzUmVtYW5pbmcsXG4gIFRpbWVSZW1hbmluZyxcbn07XG4iXX0=