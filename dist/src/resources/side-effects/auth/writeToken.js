"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.writeToken = void 0;
const fs_1 = require("fs");
const writeToken = (credentials, response) => {
    const { data: refreshCreds } = response;
    const { api_server } = refreshCreds;
    const { apiVersion } = credentials;
    const apiUrl = `${api_server}${apiVersion}`;
    const cred = Object.assign(Object.assign({}, credentials), { accessToken: refreshCreds.access_token, apiServer: refreshCreds.api_server, apiUrl, expiresIn: refreshCreds.expires_in, refreshToken: refreshCreds.refresh_token, tokenType: refreshCreds.token_type });
    fs_1.writeFileSync(cred.keyFile, cred.refreshToken, 'utf8');
    return cred;
};
exports.writeToken = writeToken;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid3JpdGVUb2tlbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NyYy9yZXNvdXJjZXMvc2lkZS1lZmZlY3RzL2F1dGgvd3JpdGVUb2tlbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSwyQkFBbUM7QUFLNUIsTUFBTSxVQUFVLEdBQUcsQ0FDeEIsV0FBd0IsRUFDeEIsUUFBdUMsRUFDMUIsRUFBRTtJQUNmLE1BQU0sRUFBRSxJQUFJLEVBQUUsWUFBWSxFQUFFLEdBQUcsUUFBUSxDQUFDO0lBQ3hDLE1BQU0sRUFBRSxVQUFVLEVBQUUsR0FBRyxZQUFZLENBQUM7SUFDcEMsTUFBTSxFQUFFLFVBQVUsRUFBRSxHQUFHLFdBQVcsQ0FBQztJQUNuQyxNQUFNLE1BQU0sR0FBRyxHQUFHLFVBQVUsR0FBRyxVQUFVLEVBQUUsQ0FBQztJQUM1QyxNQUFNLElBQUksbUNBQ0wsV0FBVyxLQUNkLFdBQVcsRUFBRSxZQUFZLENBQUMsWUFBWSxFQUN0QyxTQUFTLEVBQUUsWUFBWSxDQUFDLFVBQVUsRUFDbEMsTUFBTSxFQUNOLFNBQVMsRUFBRSxZQUFZLENBQUMsVUFBVSxFQUNsQyxZQUFZLEVBQUUsWUFBWSxDQUFDLGFBQWEsRUFDeEMsU0FBUyxFQUFFLFlBQVksQ0FBQyxVQUFVLEdBQ25DLENBQUM7SUFFRixrQkFBYSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLFlBQVksRUFBRSxNQUFNLENBQUMsQ0FBQztJQUV2RCxPQUFPLElBQUksQ0FBQztBQUNkLENBQUMsQ0FBQztBQXJCVyxRQUFBLFVBQVUsY0FxQnJCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgd3JpdGVGaWxlU3luYyB9IGZyb20gJ2ZzJztcblxuaW1wb3J0IHR5cGUgeyBDcmVkZW50aWFscywgSVJlZnJlc2hDcmVkcyB9IGZyb20gJy4uLy4uLy4uL3R5cGVzY3JpcHQnO1xuaW1wb3J0IHR5cGUgeyBDbGllbnRSZXNwb25zZSB9IGZyb20gJy4uL3R5cGVzJztcblxuZXhwb3J0IGNvbnN0IHdyaXRlVG9rZW4gPSAoXG4gIGNyZWRlbnRpYWxzOiBDcmVkZW50aWFscyxcbiAgcmVzcG9uc2U6IENsaWVudFJlc3BvbnNlPElSZWZyZXNoQ3JlZHM+LFxuKTogQ3JlZGVudGlhbHMgPT4ge1xuICBjb25zdCB7IGRhdGE6IHJlZnJlc2hDcmVkcyB9ID0gcmVzcG9uc2U7XG4gIGNvbnN0IHsgYXBpX3NlcnZlciB9ID0gcmVmcmVzaENyZWRzO1xuICBjb25zdCB7IGFwaVZlcnNpb24gfSA9IGNyZWRlbnRpYWxzO1xuICBjb25zdCBhcGlVcmwgPSBgJHthcGlfc2VydmVyfSR7YXBpVmVyc2lvbn1gO1xuICBjb25zdCBjcmVkID0ge1xuICAgIC4uLmNyZWRlbnRpYWxzLFxuICAgIGFjY2Vzc1Rva2VuOiByZWZyZXNoQ3JlZHMuYWNjZXNzX3Rva2VuLFxuICAgIGFwaVNlcnZlcjogcmVmcmVzaENyZWRzLmFwaV9zZXJ2ZXIsXG4gICAgYXBpVXJsLFxuICAgIGV4cGlyZXNJbjogcmVmcmVzaENyZWRzLmV4cGlyZXNfaW4sXG4gICAgcmVmcmVzaFRva2VuOiByZWZyZXNoQ3JlZHMucmVmcmVzaF90b2tlbixcbiAgICB0b2tlblR5cGU6IHJlZnJlc2hDcmVkcy50b2tlbl90eXBlLFxuICB9O1xuXG4gIHdyaXRlRmlsZVN5bmMoY3JlZC5rZXlGaWxlLCBjcmVkLnJlZnJlc2hUb2tlbiwgJ3V0ZjgnKTtcblxuICByZXR1cm4gY3JlZDtcbn07XG4iXX0=