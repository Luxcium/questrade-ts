"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.writeToken = void 0;
const fs_1 = require("fs");
const writeToken = (credentials, response) => {
    const { data: refreshCreds } = response;
    // const apiUrl = `${credentials.apiServer}${credentials.apiVersion}`;
    credentials.accessToken = refreshCreds.access_token;
    credentials.apiServer = refreshCreds.api_server;
    credentials.expiresIn = refreshCreds.expires_in;
    credentials.refreshToken = refreshCreds.refresh_token;
    credentials.tokenType = refreshCreds.token_type;
    credentials.apiUrl = `${credentials.apiServer}${credentials.apiVersion}`;
    fs_1.writeFileSync(credentials.keyFile, credentials.refreshToken, 'utf8');
    return credentials;
};
exports.writeToken = writeToken;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid3JpdGVUb2tlbjIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvcmVzb3VyY2VzL3NpZGUtZWZmZWN0cy9hdXRoL3dyaXRlVG9rZW4yLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLDJCQUFtQztBQUs1QixNQUFNLFVBQVUsR0FBRyxDQUN4QixXQUF3QixFQUN4QixRQUF1QyxFQUMxQixFQUFFO0lBQ2YsTUFBTSxFQUFFLElBQUksRUFBRSxZQUFZLEVBQUUsR0FBRyxRQUFRLENBQUM7SUFFeEMsc0VBQXNFO0lBQ3RFLFdBQVcsQ0FBQyxXQUFXLEdBQUcsWUFBWSxDQUFDLFlBQVksQ0FBQztJQUNwRCxXQUFXLENBQUMsU0FBUyxHQUFHLFlBQVksQ0FBQyxVQUFVLENBQUM7SUFDaEQsV0FBVyxDQUFDLFNBQVMsR0FBRyxZQUFZLENBQUMsVUFBVSxDQUFDO0lBQ2hELFdBQVcsQ0FBQyxZQUFZLEdBQUcsWUFBWSxDQUFDLGFBQWEsQ0FBQztJQUN0RCxXQUFXLENBQUMsU0FBUyxHQUFHLFlBQVksQ0FBQyxVQUFVLENBQUM7SUFDaEQsV0FBVyxDQUFDLE1BQU0sR0FBRyxHQUFHLFdBQVcsQ0FBQyxTQUFTLEdBQUcsV0FBVyxDQUFDLFVBQVUsRUFBRSxDQUFDO0lBRXpFLGtCQUFhLENBQUMsV0FBVyxDQUFDLE9BQU8sRUFBRSxXQUFXLENBQUMsWUFBWSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBRXJFLE9BQU8sV0FBVyxDQUFDO0FBQ3JCLENBQUMsQ0FBQztBQWpCVyxRQUFBLFVBQVUsY0FpQnJCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgd3JpdGVGaWxlU3luYyB9IGZyb20gJ2ZzJztcblxuaW1wb3J0IHR5cGUgeyBDcmVkZW50aWFscywgSVJlZnJlc2hDcmVkcyB9IGZyb20gJy4uLy4uLy4uL3R5cGVzY3JpcHQnO1xuaW1wb3J0IHR5cGUgeyBDbGllbnRSZXNwb25zZSB9IGZyb20gJy4uL3R5cGVzJztcblxuZXhwb3J0IGNvbnN0IHdyaXRlVG9rZW4gPSAoXG4gIGNyZWRlbnRpYWxzOiBDcmVkZW50aWFscyxcbiAgcmVzcG9uc2U6IENsaWVudFJlc3BvbnNlPElSZWZyZXNoQ3JlZHM+LFxuKTogQ3JlZGVudGlhbHMgPT4ge1xuICBjb25zdCB7IGRhdGE6IHJlZnJlc2hDcmVkcyB9ID0gcmVzcG9uc2U7XG5cbiAgLy8gY29uc3QgYXBpVXJsID0gYCR7Y3JlZGVudGlhbHMuYXBpU2VydmVyfSR7Y3JlZGVudGlhbHMuYXBpVmVyc2lvbn1gO1xuICBjcmVkZW50aWFscy5hY2Nlc3NUb2tlbiA9IHJlZnJlc2hDcmVkcy5hY2Nlc3NfdG9rZW47XG4gIGNyZWRlbnRpYWxzLmFwaVNlcnZlciA9IHJlZnJlc2hDcmVkcy5hcGlfc2VydmVyO1xuICBjcmVkZW50aWFscy5leHBpcmVzSW4gPSByZWZyZXNoQ3JlZHMuZXhwaXJlc19pbjtcbiAgY3JlZGVudGlhbHMucmVmcmVzaFRva2VuID0gcmVmcmVzaENyZWRzLnJlZnJlc2hfdG9rZW47XG4gIGNyZWRlbnRpYWxzLnRva2VuVHlwZSA9IHJlZnJlc2hDcmVkcy50b2tlbl90eXBlO1xuICBjcmVkZW50aWFscy5hcGlVcmwgPSBgJHtjcmVkZW50aWFscy5hcGlTZXJ2ZXJ9JHtjcmVkZW50aWFscy5hcGlWZXJzaW9ufWA7XG5cbiAgd3JpdGVGaWxlU3luYyhjcmVkZW50aWFscy5rZXlGaWxlLCBjcmVkZW50aWFscy5yZWZyZXNoVG9rZW4sICd1dGY4Jyk7XG5cbiAgcmV0dXJuIGNyZWRlbnRpYWxzO1xufTtcbiJdfQ==